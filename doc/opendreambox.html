<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>opendreambox</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html --> 
<meta name="src" content="opendreambox.tex"> 
<meta name="date" content="2016-10-05 23:43:00"> 
<link rel="stylesheet" type="text/css" href="opendreambox.css"> 
</head><body 
>
<div class="maketitle">
                                                                  

                                                                  
                                                                  

                                                                  

<h2 class="titleHead">opendreambox</h2>
<div class="author" ><span 
class="cmr-12">Andreas Oberritter </span><span 
class="cmtt-9">&#x003C;obi@opendreambox.org&#x003E;</span></div>
<br />
<div class="date" ><span 
class="cmr-12">October 2016</span></div>
</div>
<h3 class="likesectionHead"><a 
 id="x1-1000"></a>Contents</h3>
<div class="tableofcontents">
<span class="sectionToc" >1 <a 
href="#x1-20001" id="QQ2-1-2">Introduction</a></span>
<br />&#x00A0;<span class="subsectionToc" >1.1 <a 
href="#x1-30001.1" id="QQ2-1-3">Target audience</a></span>
<br />&#x00A0;<span class="subsectionToc" >1.2 <a 
href="#x1-40001.2" id="QQ2-1-4">Supported products</a></span>
<br />&#x00A0;<span class="subsectionToc" >1.3 <a 
href="#x1-50001.3" id="QQ2-1-5">License</a></span>
<br />&#x00A0;<span class="subsectionToc" >1.4 <a 
href="#x1-60001.4" id="QQ2-1-6">Obtaining the source code</a></span>
<br />&#x00A0;<span class="subsectionToc" >1.5 <a 
href="#x1-70001.5" id="QQ2-1-7">Quick start</a></span>
<br />&#x00A0;<span class="subsectionToc" >1.6 <a 
href="#x1-80001.6" id="QQ2-1-8">Directory structure</a></span>
<br />&#x00A0;&#x00A0;<span class="subsubsectionToc" >1.6.1 <a 
href="#x1-90001.6.1" id="QQ2-1-9">openembedded-core and meta-openembedded</a></span>
<br />&#x00A0;&#x00A0;<span class="subsubsectionToc" >1.6.2 <a 
href="#x1-100001.6.2" id="QQ2-1-10">meta-opendreambox</a></span>
<br />&#x00A0;&#x00A0;<span class="subsubsectionToc" >1.6.3 <a 
href="#x1-110001.6.3" id="QQ2-1-11">meta-dreambox</a></span>
<br /><span class="sectionToc" >2 <a 
href="#x1-120002" id="QQ2-1-12">Further readings</a></span>
<br /><span class="sectionToc" >3 <a 
href="#x1-130003" id="QQ2-1-13">Prerequisites</a></span>
<br />&#x00A0;<span class="subsectionToc" >3.1 <a 
href="#x1-140003.1" id="QQ2-1-14">Required software</a></span>
<br /><span class="sectionToc" >4 <a 
href="#x1-150004" id="QQ2-1-15">Major changes since previous public releases</a></span>
<br />&#x00A0;<span class="subsectionToc" >4.1 <a 
href="#x1-160004.1" id="QQ2-1-16">Changes since release 1.6</a></span>
<br />&#x00A0;<span class="subsectionToc" >4.2 <a 
href="#x1-170004.2" id="QQ2-1-17">Changes since release 2.0</a></span>
<br />&#x00A0;<span class="subsectionToc" >4.3 <a 
href="#x1-180004.3" id="QQ2-1-18">Changes since release 2.2</a></span>
                                                                  

                                                                  
<br /><span class="sectionToc" >5 <a 
href="#x1-190005" id="QQ2-1-19">Known Issues</a></span>
<br /><span class="sectionToc" >6 <a 
href="#x1-200006" id="QQ2-1-20">Building OpenDreambox</a></span>
<br />&#x00A0;<span class="subsectionToc" >6.1 <a 
href="#x1-210006.1" id="QQ2-1-21">Makefile targets</a></span>
<br />&#x00A0;<span class="subsectionToc" >6.2 <a 
href="#x1-220006.2" id="QQ2-1-22">Configuration variables</a></span>
<br />&#x00A0;&#x00A0;<span class="subsubsectionToc" >6.2.1 <a 
href="#x1-230006.2.1" id="QQ2-1-23">BB_NUMBER_THREADS</a></span>
<br />&#x00A0;&#x00A0;<span class="subsubsectionToc" >6.2.2 <a 
href="#x1-240006.2.2" id="QQ2-1-24">MACHINE</a></span>
<br />&#x00A0;&#x00A0;<span class="subsubsectionToc" >6.2.3 <a 
href="#x1-250006.2.3" id="QQ2-1-25">PARALLEL_MAKE</a></span>
<br />&#x00A0;<span class="subsectionToc" >6.3 <a 
href="#x1-260006.3" id="QQ2-1-26">Adding custom layers</a></span>
<br />&#x00A0;<span class="subsectionToc" >6.4 <a 
href="#x1-270006.4" id="QQ2-1-27">Adding custom options</a></span>
<br />&#x00A0;&#x00A0;<span class="subsubsectionToc" >6.4.1 <a 
href="#x1-280006.4.1" id="QQ2-1-28">DISTRO_FEED_PREFIX</a></span>
<br />&#x00A0;&#x00A0;<span class="subsubsectionToc" >6.4.2 <a 
href="#x1-290006.4.2" id="QQ2-1-29">DISTRO_FEED_URI</a></span>
<br />&#x00A0;&#x00A0;<span class="subsubsectionToc" >6.4.3 <a 
href="#x1-300006.4.3" id="QQ2-1-30">INHERIT</a></span>
<br />&#x00A0;<span class="subsectionToc" >6.5 <a 
href="#x1-310006.5" id="QQ2-1-31">Setting up a build directory</a></span>
<br />&#x00A0;<span class="subsectionToc" >6.6 <a 
href="#x1-320006.6" id="QQ2-1-32">Building a firmware image</a></span>
<br />&#x00A0;<span class="subsectionToc" >6.7 <a 
href="#x1-330006.7" id="QQ2-1-33">Building a package</a></span>
<br /><span class="sectionToc" >7 <a 
href="#x1-340007" id="QQ2-1-34">Development hints</a></span>
<br />&#x00A0;<span class="subsectionToc" >7.1 <a 
href="#x1-350007.1" id="QQ2-1-35">Cross-compilation of external software</a></span>
<br />&#x00A0;<span class="subsectionToc" >7.2 <a 
href="#x1-360007.2" id="QQ2-1-36">Coding style</a></span>
<br />&#x00A0;<span class="subsectionToc" >7.3 <a 
href="#x1-370007.3" id="QQ2-1-37">Package architecture</a></span>
<br /><span class="sectionToc" >8 <a 
href="#x1-380008" id="QQ2-1-38">Bug reports and patches</a></span>
</div>
                                                                  

                                                                  
<!--l. 54--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-20001"></a>Introduction</h3>
<div class="flushleft" 
>
<!--l. 55--><p class="noindent" >
 This document briefly describes the OpenDreambox distribution, an
embedded Linux distribution for Set-Top-Boxes manufactured by <a 
href="http://www.dream-multimedia-tv.de/" >Dream
Property GmbH</a>.
<!--l. 59--><p class="noindent" >OpenDreambox is based on the <a 
href="http://www.openembedded.org/" >OpenEmbedded</a> build framework, which uses
BitBake to transform build instructions into distributable firmare images and
software packages.
<!--l. 63--><p class="noindent" >The current version, OpenDreambox 2.5, is based on the <a 
href="https://www.yoctoproject.org/" >Yocto Project</a>, release
2.1 &#8221;Krogoth&#8221;, an umbrella project for OpenEmbedded and related tools.</div>
<!--l. 67--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-30001.1"></a>Target audience</h4>
<div class="flushleft" 
>
<!--l. 68--><p class="noindent" >
 Developers familiar with previous versions of OpenDreambox or
OpenEmbedded in general.</div>
<!--l. 73--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">1.2   </span> <a 
 id="x1-40001.2"></a>Supported products</h4>
<div class="flushleft" 
>
<!--l. 75--><p class="noindent" >
 The current version includes support for the following products:
                                                                  

                                                                  
<div class="tabular"> <table id="TBL-2" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1"></colgroup><colgroup id="TBL-2-2g"><col 
id="TBL-2-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-1"  
class="td11"><span 
class="cmbx-10">Product name   </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-2"  
class="td11"><span 
class="cmbx-10">Environment variable</span></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-1"  
class="td11"> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-2"  
class="td11"></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-1"  
class="td11">DM 500 HD V2     </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-2"  
class="td11"><span 
class="cmtt-9">MACHINE=dm500hdv2      </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-1"  
class="td11">DM 520 HD         </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-2"  
class="td11"><span 
class="cmtt-9">MACHINE=dm520          </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-5-1"  
class="td11">DM 800 HD SE V2</td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-5-2"  
class="td11"><span 
class="cmtt-9">MACHINE=dm800sev2      </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-6-1"  
class="td11">DM 820 HD         </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-6-2"  
class="td11"><span 
class="cmtt-9">MACHINE=dm820          </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-7-1"  
class="td11">DM 7020 HD        </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-7-2"  
class="td11"><span 
class="cmtt-9">MACHINE=dm7020hd       </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-8-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-8-1"  
class="td11">DM 7020 HD V2   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-8-2"  
class="td11"><span 
class="cmtt-9">MACHINE=dm7020hdv2     </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-9-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-9-1"  
class="td11">DM 7080 HD        </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-9-2"  
class="td11"><span 
class="cmtt-9">MACHINE=dm7080         </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-10-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-10-1"  
class="td11">DM 8000 HD PVR</td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-10-2"  
class="td11"><span 
class="cmtt-9">MACHINE=dm8000         </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-11-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-11-1"  
class="td11">                </td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-11-2"  
class="td11">                     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-12-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-12-1"  
class="td11">                </td>
</tr></table></div>
<!--l. 94--><p class="noindent" >Note, that not all of these platforms offer enough internal storage to actually flash a
generated firmware image. It might be possible to boot from external storage or
network, though.</div>
<!--l. 99--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">1.3   </span> <a 
 id="x1-50001.3"></a>License</h4>
                                                                  

                                                                  
<div class="verbatim" id="verbatim-1">
Copyright&#x00A0;(c)&#x00A0;2010-2014&#x00A0;Dream&#x00A0;Property&#x00A0;GmbH,&#x00A0;Germany
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;http://www.dream-multimedia-tv.de/
&#x00A0;<br />Authors:
&#x00A0;<br />&#x00A0;&#x00A0;Andreas&#x00A0;Frisch&#x00A0;&#x003C;fraxinas@opendreambox.org&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;Andreas&#x00A0;Monzner&#x00A0;&#x003C;ghost@opendreambox.org&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;Andreas&#x00A0;Oberritter&#x00A0;&#x003C;obi@opendreambox.org&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;Mladen&#x00A0;Horvat&#x00A0;&#x003C;acid-burn@opendreambox.org&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;Stefan&#x00A0;Pluecken&#x00A0;&#x003C;thedoc@opendreambox.org&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;Stephan&#x00A0;Reichholf&#x00A0;&#x003C;reichi@opendreambox.org&#x003E;
&#x00A0;<br />
&#x00A0;<br />Permission&#x00A0;is&#x00A0;hereby&#x00A0;granted,&#x00A0;free&#x00A0;of&#x00A0;charge,&#x00A0;to&#x00A0;any&#x00A0;person&#x00A0;obtaining&#x00A0;a&#x00A0;copy
&#x00A0;<br />of&#x00A0;this&#x00A0;software&#x00A0;and&#x00A0;associated&#x00A0;documentation&#x00A0;files&#x00A0;(the&#x00A0;"Software"),&#x00A0;to&#x00A0;deal
&#x00A0;<br />in&#x00A0;the&#x00A0;Software&#x00A0;without&#x00A0;restriction,&#x00A0;including&#x00A0;without&#x00A0;limitation&#x00A0;the&#x00A0;rights
&#x00A0;<br />to&#x00A0;use,&#x00A0;copy,&#x00A0;modify,&#x00A0;merge,&#x00A0;publish,&#x00A0;distribute,&#x00A0;sublicense,&#x00A0;and/or&#x00A0;sell
&#x00A0;<br />copies&#x00A0;of&#x00A0;the&#x00A0;Software,&#x00A0;and&#x00A0;to&#x00A0;permit&#x00A0;persons&#x00A0;to&#x00A0;whom&#x00A0;the&#x00A0;Software&#x00A0;is
&#x00A0;<br />furnished&#x00A0;to&#x00A0;do&#x00A0;so,&#x00A0;subject&#x00A0;to&#x00A0;the&#x00A0;following&#x00A0;conditions:
&#x00A0;<br />
&#x00A0;<br />The&#x00A0;above&#x00A0;copyright&#x00A0;notice&#x00A0;and&#x00A0;this&#x00A0;permission&#x00A0;notice&#x00A0;shall&#x00A0;be&#x00A0;included&#x00A0;in
&#x00A0;<br />all&#x00A0;copies&#x00A0;or&#x00A0;substantial&#x00A0;portions&#x00A0;of&#x00A0;the&#x00A0;Software.
&#x00A0;<br />
&#x00A0;<br />THE&#x00A0;SOFTWARE&#x00A0;IS&#x00A0;PROVIDED&#x00A0;"AS&#x00A0;IS",&#x00A0;WITHOUT&#x00A0;WARRANTY&#x00A0;OF&#x00A0;ANY&#x00A0;KIND,&#x00A0;EXPRESS&#x00A0;OR
&#x00A0;<br />IMPLIED,&#x00A0;INCLUDING&#x00A0;BUT&#x00A0;NOT&#x00A0;LIMITED&#x00A0;TO&#x00A0;THE&#x00A0;WARRANTIES&#x00A0;OF&#x00A0;MERCHANTABILITY,
&#x00A0;<br />FITNESS&#x00A0;FOR&#x00A0;A&#x00A0;PARTICULAR&#x00A0;PURPOSE&#x00A0;AND&#x00A0;NONINFRINGEMENT.&#x00A0;IN&#x00A0;NO&#x00A0;EVENT&#x00A0;SHALL&#x00A0;THE
&#x00A0;<br />AUTHORS&#x00A0;OR&#x00A0;COPYRIGHT&#x00A0;HOLDERS&#x00A0;BE&#x00A0;LIABLE&#x00A0;FOR&#x00A0;ANY&#x00A0;CLAIM,&#x00A0;DAMAGES&#x00A0;OR&#x00A0;OTHER
&#x00A0;<br />LIABILITY,&#x00A0;WHETHER&#x00A0;IN&#x00A0;AN&#x00A0;ACTION&#x00A0;OF&#x00A0;CONTRACT,&#x00A0;TORT&#x00A0;OR&#x00A0;OTHERWISE,&#x00A0;ARISING&#x00A0;FROM,
&#x00A0;<br />OUT&#x00A0;OF&#x00A0;OR&#x00A0;IN&#x00A0;CONNECTION&#x00A0;WITH&#x00A0;THE&#x00A0;SOFTWARE&#x00A0;OR&#x00A0;THE&#x00A0;USE&#x00A0;OR&#x00A0;OTHER&#x00A0;DEALINGS&#x00A0;IN
&#x00A0;<br />THE&#x00A0;SOFTWARE.
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;</div>
<!--l. 129--><p class="nopar" >
<!--l. 131--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">1.4   </span> <a 
 id="x1-60001.4"></a>Obtaining the source code</h4>
<!--l. 132--><p class="noindent" >OpenDreambox uses the Git version control system. To obtain the source code, it is
required to install Git. See <a 
href="http://git-scm.com/" class="url" ><span 
class="cmtt-10">http://git-_scm.com/</span></a>.
<!--l. 135--><p class="noindent" >To initially download the source into the current directory, issue the following
command:
<!--l. 138--><p class="noindent" ><span 
class="cmtt-9">git clone -b krogoth git://git.opendreambox.org/git/opendreambox.git</span>
<!--l. 140--><p class="noindent" >The Git repository can be viewed online at:
<!--l. 142--><p class="noindent" ><a 
href="http://git.opendreambox.org/?p=opendreambox.git" class="url" ><span 
class="cmtt-10">http://git.opendreambox.org/?p=opendreambox.git</span></a>
                                                                  

                                                                  
<!--l. 144--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">1.5   </span> <a 
 id="x1-70001.5"></a>Quick start</h4>
<!--l. 145--><p class="noindent" >For the impatient:
<!--l. 147--><p class="noindent" ><span 
class="cmtt-9">make -C opendreambox image</span>
<!--l. 149--><p class="noindent" >If this command fails, prerequisites my be missing. See section <a 
href="#x1-130003">3<!--tex4ht:ref: prerequisites --></a>.
<!--l. 151--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">1.6   </span> <a 
 id="x1-80001.6"></a>Directory structure</h4>
<!--l. 152--><p class="noindent" >OpenDreambox consists of a set of layers containing build instructions. This meta
data is used by BitBake to download and compile source code and to assemble
installable software packages and firmware images.
<!--l. 156--><p class="noindent" >Currently, these layers are used:
     <ul class="itemize1">
     <li class="itemize"><span 
class="cmtt-9">meta-dreambox</span>
     </li>
     <li class="itemize"><span 
class="cmtt-9">meta-opendreambox</span>
     </li>
     <li class="itemize"><span 
class="cmtt-9">meta-openembedded/meta-filesystems</span>
     </li>
     <li class="itemize"><span 
class="cmtt-9">meta-openembedded/meta-multimedia</span>
     </li>
     <li class="itemize"><span 
class="cmtt-9">meta-openembedded/meta-networking</span>
     </li>
     <li class="itemize"><span 
class="cmtt-9">meta-openembedded/meta-oe</span>
     </li>
     <li class="itemize"><span 
class="cmtt-9">meta-openembedded/meta-python</span>
     </li>
     <li class="itemize"><span 
class="cmtt-9">meta-openembedded/meta-ruby</span>
     </li>
     <li class="itemize"><span 
class="cmtt-9">meta-openembedded/meta-webserver</span>
     </li>
     <li class="itemize"><span 
class="cmtt-9">meta-qt5</span>
     </li>
     <li class="itemize"><span 
class="cmtt-9">openembedded-core/meta</span></li></ul>
                                                                  

                                                                  
<!--l. 172--><p class="noindent" >If a recipe for the same package exists in multiple layers, then the higher priority
layer takes precedence over the lower priority layer.
<!--l. 176--><p class="noindent" >For example, if <span 
class="cmtt-9">libmad</span><span 
class="cmtt-9">_0.15.1b.bb </span>existed in both <span 
class="cmtt-9">meta-openembedded </span>and
<span 
class="cmtt-9">openembedded-core</span>, the recipe in <span 
class="cmtt-9">meta-openembedded </span>would be used, because
<span 
class="cmtt-9">openembedded-core </span>has lower priority. Priority values are determined by the variable
<span 
class="cmtt-9">BBFILE</span><span 
class="cmtt-9">_PRIORITY </span>in <span 
class="cmtt-9">conf/layer.conf </span>of each layer.
<!--l. 182--><p class="noindent" ><span 
class="cmbx-10">NOTE: </span>This would still be true even if the version of <span 
class="cmtt-9">libmad </span>in <span 
class="cmtt-9">openembeded-core</span>
was higher than the version in <span 
class="cmtt-9">meta-openembedded</span>, unless <span 
class="cmtt-9">PREFERRED</span><span 
class="cmtt-9">_VERSION</span><span 
class="cmtt-9">_libmad</span>
was set to the version in <span 
class="cmtt-9">openembedded-core</span>. There is currently no way to prefer a
version of a lower priority layer, if the same version is present in a higher priority
layer.
<!--l. 188--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">1.6.1   </span> <a 
 id="x1-90001.6.1"></a>openembedded-core and meta-openembedded</h5>
<!--l. 189--><p class="noindent" >These directories contain copies of Git repositories from git.openembedded.org,
including the OpenEmbedded-Core layer and the (Meta-)OpenEmbedded layers.
They get created automatically when building the distribution for the first
time.
<!--l. 193--><p class="noindent" >Throughout this document, the combination of these directories will be referred to as
OpenEmbedded.
<!--l. 196--><p class="noindent" >The latest changes to these Git repositories can be seen at:
<!--l. 198--><p class="noindent" ><a 
href="http://git.openembedded.org/openembedded-core-contrib/log/?h=obi/krogoth" class="url" ><span 
class="cmtt-10">http://git.openembedded.org/openembedded-_core-_contrib/log/?h=obi/krogoth</span></a>
<!--l. 200--><p class="noindent" ><a 
href="http://git.openembedded.org/meta-openembedded-contrib/log/?h=obi/krogoth" class="url" ><span 
class="cmtt-10">http://git.openembedded.org/meta-_openembedded-_contrib/log/?h=obi/krogoth</span></a>
<!--l. 202--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">1.6.2   </span> <a 
 id="x1-100001.6.2"></a>meta-opendreambox</h5>
<!--l. 203--><p class="noindent" >This directory contains:
     <ul class="itemize1">
     <li class="itemize">Recipes   for   packages   written   specifically   for   the   OpenDreambox
     distribution
     </li>
     <li class="itemize">Modifications to recipes from OpenEmbedded
     </li>
     <li class="itemize">Recipes   for   software   versions   older   than   those   available   from
     OpenEmbedded
                                                                  

                                                                  
     </li>
     <li class="itemize">Recipes   for   software   versions   newer   than   those   available   from
     OpenEmbedded</li></ul>
<!--l. 212--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">1.6.3   </span> <a 
 id="x1-110001.6.3"></a>meta-dreambox</h5>
<!--l. 213--><p class="noindent" >The directory <span 
class="cmtt-9">meta-dreambox </span>contains Board Support Packages (BSP) for the
supported Dreambox models. This includes:
     <ul class="itemize1">
     <li class="itemize">Hardware drivers
     </li>
     <li class="itemize">Machine specific overrides
     </li>
     <li class="itemize">The Linux kernel
     </li>
     <li class="itemize">The boot loader
     </li>
     <li class="itemize">Splash images</li></ul>
<!--l. 224--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-120002"></a>Further readings</h3>
     <ul class="itemize1">
     <li class="itemize">The Yocto Project Reference Manual: <a 
href="https://www.yoctoproject.org/docs/2.1/ref-manual/ref-manual.html" class="url" ><span 
class="cmtt-10">https://www.yoctoproject.org/docs/2.1/ref-_manual/ref-_manual.html</span></a></li></ul>
<!--l. 230--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-130003"></a>Prerequisites</h3>
<!--l. 233--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">3.1   </span> <a 
 id="x1-140003.1"></a>Required software</h4>
<!--l. 235--><p class="noindent" >The OpenEmbedded project provides a general list of prerequisites for many Linux
distributions and also for some other operating systems.
                                                                  

                                                                  
     <ul class="itemize1">
     <li class="itemize"><a 
href="http://www.openembedded.org/wiki/Getting\_started#Required\_software" class="url" ><span 
class="cmtt-10">http://www.openembedded.org/wiki/Getting\_started#Required\_software</span></a></li></ul>
<!--l. 242--><p class="noindent" >It is highly recommended to use Linux to build OpenDreambox. In theory, any recent
distribution will do, but not many distributions have been verified to build
OpenDreambox without errors. Tested distributions include:
     <ul class="itemize1">
     <li class="itemize">Debian 8.6 &#8221;Jessie&#8221; [amd64]
     </li>
     <li class="itemize">Ubuntu 16.04.1 LTS &#8221;Xenial Xerus&#8221; [amd64]</li></ul>
                                                                  

                                                                  
<!--l. 254--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-150004"></a>Major changes since previous public releases</h3>
<!--l. 256--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">4.1   </span> <a 
 id="x1-160004.1"></a>Changes since release 1.6</h4>
     <ul class="itemize1">
     <li class="itemize">Recipes were split across multiple layers and categorized.
     </li>
     <li class="itemize"><span 
class="cmtt-9">env.source  </span>has   been   replaced   by   two   files,   <span 
class="cmtt-9">bitbake.env  </span>and
     <span 
class="cmtt-9">cross-compile.env</span>. The former sets a minimal environment that is needed
     to execute bitbake. The latter creates machine-specific command aliases,
     in order to compile external software.
     </li>
     <li class="itemize">All machines share a common <span 
class="cmtt-9">tmp </span>directory.
     </li>
     <li class="itemize"><span 
class="cmtt-9">$</span><span 
class="cmsy-9">{</span><span 
class="cmtt-9">MACHINE</span><span 
class="cmsy-9">}</span><span 
class="cmtt-9">/build </span>directories were renamed to <span 
class="cmtt-9">build/$</span><span 
class="cmsy-9">{</span><span 
class="cmtt-9">MACHINE</span><span 
class="cmsy-9">}</span>.
     </li>
     <li class="itemize">Kernel packages were renamed from <span 
class="cmtt-9">linux-$</span><span 
class="cmsy-9">{</span><span 
class="cmtt-9">MACHINE</span><span 
class="cmsy-9">} </span>to <span 
class="cmtt-9">linux-dreambox</span>.
     </li>
     <li class="itemize">Support for machines based on ATI Xilleon or IBM STB was dropped.</li></ul>
<!--l. 269--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">4.2   </span> <a 
 id="x1-170004.2"></a>Changes since release 2.0</h4>
     <ul class="itemize1">
     <li class="itemize">Added support for DM520, DM525, DM820 and DM7080.
     </li>
     <li class="itemize">If   a   recipe   changes,   the   corresponding   packages   will   be   rebuilt
     automatically, in contrast to required manual PR bumps in the past.
     </li>
     <li class="itemize">Each machine uses its own tmp directory again, like before 2.0. However,
     there is a shared <span 
class="cmtt-9">sstate-cache</span>, which allows to share already compiled
     data between compatible machines. This impacts performance and size of
     the build system, but improves reliability and consistency across builds.
                                                                  

                                                                  
     </li>
     <li class="itemize">Support for machines without FPU and kernel versions below 3.x was
     dropped (DM800).
     </li>
     <li class="itemize">Layers under meta-bsp were combined into meta-dreambox.
     </li>
     <li class="itemize">Default package format switched from ipk (opkg) to deb (dpkg + apt).
     </li>
     <li class="itemize"><span 
class="cmtt-9">dreambox-image   </span>was    renamed    to    include    the    package    format
     (<span 
class="cmtt-9">dreambox-image-deb</span>).</li></ul>
<!--l. 284--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">4.3   </span> <a 
 id="x1-180004.3"></a>Changes since release 2.2</h4>
     <ul class="itemize1">
     <li class="itemize">Added support for DM900.
     </li>
     <li class="itemize">Support  for  machines  with  low  memory  was  dropped  (DM500HD,
     DM800SE).
     </li>
     <li class="itemize">Switched from Qt4 to Qt5.</li></ul>
<!--l. 291--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-190005"></a>Known Issues</h3>
<!--l. 293--><p class="noindent" >None.
                                                                  

                                                                  
<!--l. 297--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">6   </span> <a 
 id="x1-200006"></a>Building OpenDreambox</h3>
<!--l. 299--><p class="noindent" >In the top level directory, there is a <span 
class="cmtt-9">Makefile</span>, which is used to set up build
directories and to fetch or update all used repositories. The Makefile can
be influenced by environment variables, either by specifing them on the
command-line or by storing them in a file called <span 
class="cmtt-9">conf/make.conf</span>. It is not
recommended to edit the <span 
class="cmtt-9">Makefile </span>directly in order to avoid conflicts with future
updates.
<!--l. 306--><p class="noindent" >When the <span 
class="cmtt-9">Makefile </span>is run for the first time, the following steps will be executed:
     <ul class="itemize1">
     <li class="itemize">Creation of configuration files
         <ul class="itemize2">
         <li class="itemize"><span 
class="cmtt-9">bitbake.env</span>
         </li>
         <li class="itemize"><span 
class="cmtt-9">conf/opendreambox.conf</span>
         </li>
         <li class="itemize"><span 
class="cmtt-9">build/$</span><span 
class="cmsy-9">{</span><span 
class="cmtt-9">MACHINE</span><span 
class="cmsy-9">}</span><span 
class="cmtt-9">/conf/bblayers.conf</span>
         </li>
         <li class="itemize"><span 
class="cmtt-9">build/$</span><span 
class="cmsy-9">{</span><span 
class="cmtt-9">MACHINE</span><span 
class="cmsy-9">}</span><span 
class="cmtt-9">/conf/local.conf</span></li></ul>
     </li>
     <li class="itemize">Update or checkout of Git repositories
         <ul class="itemize2">
         <li class="itemize">OpenDreambox
         </li>
         <li class="itemize">BitBake
         </li>
         <li class="itemize">OpenEmbedded</li></ul>
     </li></ul>
<!--l. 325--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">6.1   </span> <a 
 id="x1-210006.1"></a>Makefile targets</h4>
<!--l. 326--><p class="noindent" >Run <span 
class="cmtt-9">make help </span>to get a list of targets of the top level Makefile, together with a brief
description.
                                                                  

                                                                  
<!--l. 328--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">6.2   </span> <a 
 id="x1-220006.2"></a>Configuration variables</h4>
<!--l. 329--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">6.2.1   </span> <a 
 id="x1-230006.2.1"></a>BB_NUMBER_THREADS</h5>
<!--l. 330--><p class="noindent" >Controls how many BitBake tasks may run at a time. Defaults to the number of cores
available on the build system.
<!--l. 333--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">6.2.2   </span> <a 
 id="x1-240006.2.2"></a>MACHINE</h5>
<!--l. 334--><p class="noindent" >Controls the target machine to build packages for. See section <a 
href="#x1-40001.2">1.2<!--tex4ht:ref: products --></a> for a list of
supported products.
<!--l. 337--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">6.2.3   </span> <a 
 id="x1-250006.2.3"></a>PARALLEL_MAKE</h5>
<!--l. 338--><p class="noindent" >Controls how many processes per recipe <span 
class="cmtt-9">make </span>may use. Defaults to the number of
cores available on the build system.
<!--l. 341--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">6.3   </span> <a 
 id="x1-260006.3"></a>Adding custom layers</h4>
<!--l. 343--><p class="noindent" >It is possible to add custom layers to the build system. This can be done globally and
per machine. To add a layer globally, edit <span 
class="cmtt-9">conf/bblayers-ext.conf</span>. To add a
machine-specific layer, edit <span 
class="cmtt-9">conf/bblayers-$</span><span 
class="cmsy-9">{</span><span 
class="cmtt-9">MACHINE</span><span 
class="cmsy-9">}</span><span 
class="cmtt-9">-ext.conf</span>. Assuming that an
additional layer is available at <span 
class="cmtt-9">$</span><span 
class="cmsy-9">{</span><span 
class="cmtt-9">HOME</span><span 
class="cmsy-9">}</span><span 
class="cmtt-9">/custom-layer</span>, the entry to add to the file will
look like this:
<!--l. 349--><p class="noindent" ><span 
class="cmtt-9">BBLAYERS =+ "$</span><span 
class="cmsy-9">{</span><span 
class="cmtt-9">HOME</span><span 
class="cmsy-9">}</span><span 
class="cmtt-9">/custom-layer"</span>
<!--l. 351--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">6.4   </span> <a 
 id="x1-270006.4"></a>Adding custom options</h4>
<!--l. 352--><p class="noindent" >It is possible to tweak a lot more options than those used by the <span 
class="cmtt-9">Makefile </span>by editing
<span 
class="cmtt-9">conf/local-ext.conf </span>or <span 
class="cmtt-9">conf/local-$</span><span 
class="cmsy-9">{</span><span 
class="cmtt-9">MACHINE</span><span 
class="cmsy-9">}</span><span 
class="cmtt-9">-ext.conf</span>.
                                                                  

                                                                  
<!--l. 355--><p class="noindent" >For example, if the firmware shall use the package feed built on the develoment
machine, which happens to be 192.168.1.1 and has a webserver configured to point to
<span 
class="cmtt-9">tmp/deploy/ipk</span>, a line like the following may be added:
<!--l. 359--><p class="noindent" ><span 
class="cmtt-9">DISTRO</span><span 
class="cmtt-9">_FEED</span><span 
class="cmtt-9">_URI = "http://192.168.1.1/$</span><span 
class="cmsy-9">{</span><span 
class="cmtt-9">DISTRO</span><span 
class="cmsy-9">}</span><span 
class="cmtt-9">/$</span><span 
class="cmsy-9">{</span><span 
class="cmtt-9">DISTRO</span><span 
class="cmtt-9">_VERSION</span><span 
class="cmsy-9">}</span><span 
class="cmtt-9">"</span>
<!--l. 361--><p class="noindent" >In general, any variable in OpenEmbedded that uses weak assignment (<span 
class="cmtt-9">?=</span>) may be
overridden from these files.
<!--l. 364--><p class="noindent" >The following sections list some commonly used options.
<!--l. 366--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">6.4.1   </span> <a 
 id="x1-280006.4.1"></a>DISTRO_FEED_PREFIX</h5>
<!--l. 368--><p class="noindent" ><span 
class="cmtt-9">DISTRO</span><span 
class="cmtt-9">_FEED</span><span 
class="cmtt-9">_PREFIX </span>specifies the name of the package update feed. This name may be
chosen arbitarily.
<!--l. 371--><p class="noindent" >Default: <span 
class="cmtt-9">DISTRO</span><span 
class="cmtt-9">_FEED</span><span 
class="cmtt-9">_PREFIX = "remote"</span>
<!--l. 373--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">6.4.2   </span> <a 
 id="x1-290006.4.2"></a>DISTRO_FEED_URI</h5>
<!--l. 375--><p class="noindent" ><span 
class="cmtt-9">DISTRO</span><span 
class="cmtt-9">_FEED</span><span 
class="cmtt-9">_URI </span>specifies the URI of the package update feed.
<!--l. 377--><p class="noindent" >Default: <span 
class="cmtt-9">DISTRO</span><span 
class="cmtt-9">_FEED</span><span 
class="cmtt-9">_URI = "http://my-distribution.example/remote-feed/"</span>
<!--l. 379--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">6.4.3   </span> <a 
 id="x1-300006.4.3"></a>INHERIT</h5>
<!--l. 381--><p class="noindent" ><span 
class="cmtt-9">INHERIT </span>specifies bbclasses to include from a configuration file. Usually, this variable
gets appended to by using the <span 
class="cmtt-9">+= </span>operator.
<!--l. 384--><p class="noindent" >The OpenDreambox distribution automatically appends <span 
class="cmtt-9">"buildhistory recipe</span><span 
class="cmtt-9">_sanity"</span>
to <span 
class="cmtt-9">INHERIT</span>.
<!--l. 386--><p class="noindent" >Default: <span 
class="cmtt-9">INHERIT = ""</span>
<!--l. 388--><p class="noindent" ><span 
class="cmbx-10">Some examples:</span>
<!--l. 390--><p class="noindent" >Always build the latest versions of OpenDreambox-related projects from
Git:
<!--l. 392--><p class="noindent" ><span 
class="cmtt-9">INHERIT += "opendreambox-autorev"</span>
                                                                  

                                                                  
<!--l. 394--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">6.5   </span> <a 
 id="x1-310006.5"></a>Setting up a build directory</h4>
<!--l. 395--><p class="noindent" >To set up a build directory for e.g. <span 
class="cmbx-10">DM 7080 </span>run <span 
class="cmtt-9">make MACHINE=dm7080</span>. If
<span 
class="cmtt-9">MACHINE=dm7080 </span>has been set in <span 
class="cmtt-9">conf/make.conf </span>(default), you can simply run
<span 
class="cmtt-9">make </span>with no arguments instead. This will create and initialize the directory
<span 
class="cmtt-9">build/dm7080</span>.
<!--l. 399--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">6.6   </span> <a 
 id="x1-320006.6"></a>Building a firmware image</h4>
<!--l. 400--><p class="noindent" >To build a firmware image for e.g. <span 
class="cmbx-10">DM 7080 </span>run <span 
class="cmtt-9">make MACHINE=dm7080 image</span>. If
<span 
class="cmtt-9">MACHINE=dm7080 </span>has been set in <span 
class="cmtt-9">conf/make.conf </span>(default), you can simply run <span 
class="cmtt-9">make</span>
<span 
class="cmtt-9">image </span>instead.
<!--l. 404--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">6.7   </span> <a 
 id="x1-330006.7"></a>Building a package</h4>
<!--l. 405--><p class="noindent" >To build a single package, BitBake has to be used directly. First, the environment has
to be set up, in order to make BitBake available to the shell. This can be done with
the following command:
<!--l. 409--><p class="noindent" ><span 
class="cmtt-9">source bitbake.env</span>
<!--l. 411--><p class="noindent" >BitBake must be run from the machine&#8217;s build directory. For <span 
class="cmbx-10">DM 7080</span>
run:
<!--l. 413--><p class="noindent" ><span 
class="cmtt-9">cd build/dm7080</span>
<!--l. 415--><p class="noindent" >In order to build enigma2, run:
<!--l. 417--><p class="noindent" ><span 
class="cmtt-9">bitbake enigma2</span>.
<!--l. 419--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">7   </span> <a 
 id="x1-340007"></a>Development hints</h3>
<!--l. 421--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">7.1   </span> <a 
 id="x1-350007.1"></a>Cross-compilation of external software</h4>
<!--l. 422--><p class="noindent" >OpenDreambox provides a script called <span 
class="cmtt-9">cross-compile.env</span>. Once run, the script will
create the following commands (shell aliases), aiming to ease cross-compilation of
external source trees:
                                                                  

                                                                  
     <ul class="itemize1">
     <li class="itemize"><span 
class="cmtt-9">oe</span><span 
class="cmtt-9">_autoreconf </span>- Calls OE&#8217;s version of <span 
class="cmtt-9">autoreconf</span>. Useful for projects based
     on GNU autotools.
     </li>
     <li class="itemize"><span 
class="cmtt-9">oe</span><span 
class="cmtt-9">_runconf </span>- Calls <span 
class="cmtt-9">./configure </span>with parameters suitable for OE. Useful
     for projects based on GNU autotools.
     </li>
     <li class="itemize"><span 
class="cmtt-9">oe</span><span 
class="cmtt-9">_runmake </span>-  Calls  <span 
class="cmtt-9">make </span>with  parameters  suitable  for  OE.  Useful  for
     projects based on GNU autotools or GNU make.
     </li>
     <li class="itemize"><span 
class="cmtt-9">oe</span><span 
class="cmtt-9">_env </span>- Useful to execute arbitrary commands in the OE environment
     (e.g. <span 
class="cmtt-9">oe</span><span 
class="cmtt-9">_env env</span>).
     </li>
     <li class="itemize"><span 
class="cmtt-9">oe</span><span 
class="cmtt-9">_setenv </span>- Exports the OE environment to the currently running shell
     session.</li></ul>
<!--l. 433--><p class="noindent" >The script needs to know the target machine, which can be one of the supported
products (see <a 
href="#x1-40001.2">1.2<!--tex4ht:ref: products --></a>). Because the script adds aliases to your currently running shell
session, it has to be invoked using <span 
class="cmtt-9">source </span>or <span 
class="cmtt-9">. </span>(the dot operator), e.g.:
<!--l. 436--><p class="noindent" ><span 
class="cmtt-9">source cross-compile.env dm7080</span>
<!--l. 438--><p class="noindent" >The script may be called from any location, but must reside inside the OpenDreambox
Git tree. You may want to create a symlink to <span 
class="cmtt-9">cross-compile.env </span>somewhere in your
<span 
class="cmtt-9">PATH</span>.
<!--l. 441--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">7.2   </span> <a 
 id="x1-360007.2"></a>Coding style</h4>
<!--l. 442--><p class="noindent" >Run <span 
class="cmtt-9">scripts/do</span><span 
class="cmtt-9">_stylize.sh </span>on new recipes to ensure proper coding style.
<!--l. 444--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">7.3   </span> <a 
 id="x1-370007.3"></a>Package architecture</h4>
<!--l. 445--><p class="noindent" >Set <span 
class="cmtt-9">PACKAGE</span><span 
class="cmtt-9">_ARCH = "$</span><span 
class="cmsy-9">{</span><span 
class="cmtt-9">MACHINE</span><span 
class="cmtt-9">_ARCH</span><span 
class="cmsy-9">}</span><span 
class="cmtt-9">" </span>if either condition is met:
     <ul class="itemize1">
     <li class="itemize">The     recipe     uses     <span 
class="cmtt-9">COMBINED</span><span 
class="cmtt-9">_FEATURES</span>,     <span 
class="cmtt-9">MACHINE</span><span 
class="cmtt-9">_FEATURES    </span>or
     <span 
class="cmtt-9">DREAMBOX</span><span 
class="cmtt-9">_FEATURES</span>.
     </li>
     <li class="itemize">The recipe uses <span 
class="cmtt-9">COMPATIBLE</span><span 
class="cmtt-9">_MACHINE</span>.
                                                                  

                                                                  
     </li>
     <li class="itemize">The recipe is part of <span 
class="cmtt-9">meta-dreambox</span>.</li></ul>
<!--l. 452--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">8   </span> <a 
 id="x1-380008"></a>Bug reports and patches</h3>
<!--l. 454--><p class="noindent" >Please send bug reports and patches to the Enigma2 development mailing list
<span 
class="cmtt-9">&#x003C;enigma2-devel@lists.elitedvb.net&#x003E;</span>.
<!--l. 456--><p class="noindent" >A comfortable way to create patches is to use <span 
class="cmtt-9">git format-patch</span>, after all changes
have been committed to your local copy of the repository.
 
</body></html> 

                                                                  


