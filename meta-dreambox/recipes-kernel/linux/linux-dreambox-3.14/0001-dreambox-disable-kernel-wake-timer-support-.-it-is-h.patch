From e7fcfa3252790211ae138e4e8201996acee378e9 Mon Sep 17 00:00:00 2001
From: Andreas Monzner <andreas.monzner@dream-property.net>
Date: Tue, 20 Dec 2016 01:35:08 +0100
Subject: [PATCH] dreambox: disable kernel wake timer support .. it is handled
 by our own drivers

---
 arch/arm/kernel/process.c   | 2 +-
 drivers/soc/brcmstb/Kconfig | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/arch/arm/kernel/process.c b/arch/arm/kernel/process.c
index 5f6e650..3b3a7f1e 100644
--- a/arch/arm/kernel/process.c
+++ b/arch/arm/kernel/process.c
@@ -125,7 +125,7 @@ void (*pm_power_off)(void);
 EXPORT_SYMBOL(pm_power_off);
 
 void (*arm_pm_restart)(enum reboot_mode reboot_mode, const char *cmd) = null_restart;
-EXPORT_SYMBOL_GPL(arm_pm_restart);
+EXPORT_SYMBOL(arm_pm_restart);
 
 /*
  * This is our default idle handler.
diff --git a/drivers/soc/brcmstb/Kconfig b/drivers/soc/brcmstb/Kconfig
index cbf6287..9d1149c 100644
--- a/drivers/soc/brcmstb/Kconfig
+++ b/drivers/soc/brcmstb/Kconfig
@@ -76,6 +76,7 @@ config BRCMSTB_SRPD
 	  value on Broadcom STB memory controllers.
 
 config BRCMSTB_WKTMR
+	depends on !DREAMBOX
 	tristate "Support wake-up timer"
 
 # Perform memory hashing before entering S3, using XPT DMA
-- 
2.1.4

