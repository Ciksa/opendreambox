From 926fe62d0b64fc6148c99b696c74e1c49e18e27c Mon Sep 17 00:00:00 2001
From: ghost <andreas.monzner@dream-property.net>
Date: Sat, 14 May 2016 00:54:49 +0200
Subject: [PATCH 3/3] allow to call RecordTimerEntry.calculateFilename without
 argument again (to fix autotimer and seriesplugin)

---
 usr/lib/enigma2/python/RecordTimer.py | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/RecordTimer.py b/RecordTimer.py
index ed9d658..a8deca4 100644
--- a/usr/lib/enigma2/python/RecordTimer.py
+++ b/usr/lib/enigma2/python/RecordTimer.py
@@ -132,7 +132,7 @@ class RecordTimerEntry(timer.TimerEntry, object):
 		self.log_entries.append((int(time()), code, msg))
 		print "[TIMER]", msg
 
-	def calculateFilename(self, record_service):
+	def calculateFilename(self, record_service=None):
 		service_name = self.service_ref.getServiceName()
 		begin_date = strftime("%Y%m%d %H%M", localtime(self.begin))
 		begin_shortdate = strftime("%Y%m%d", localtime(self.begin))
@@ -163,7 +163,8 @@ class RecordTimerEntry(timer.TimerEntry, object):
 			dirname = defaultMoviePath()
 		else:
 			dirname = self.dirname
-		self.Filename = Directories.getRecordingFilename(filename, dirname) + record_service.getFileExtension()
+		self.Filename = Directories.getRecordingFilename(filename, dirname) + (".ts" if record_service is None else record_service.getFileExtension())
+
 		self.log(0, "Filename calculated as: '%s'" % self.Filename)
 		#begin_date + " - " + service_name + description)
 
-- 
1.9.1

