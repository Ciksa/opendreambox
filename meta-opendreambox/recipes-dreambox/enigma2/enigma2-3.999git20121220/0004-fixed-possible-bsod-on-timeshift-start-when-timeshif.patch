From a46fb685b30f786f3be1e5a0ddcb15f7b6968307 Mon Sep 17 00:00:00 2001
From: ghost <andreas.monzner@dream-property.net>
Date: Thu, 27 Dec 2012 16:14:56 +0100
Subject: [PATCH 4/5] fixed possible bsod on timeshift start when timeshift is
 not possible

---
 usr/lib/enigma2/python/Screens/InfoBarGenerics.py |    5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/usr/lib/enigma2/python/Screens/InfoBarGenerics.py b/usr/lib/enigma2/python/Screens/InfoBarGenerics.py
index 9065ed4..f444c97 100644
--- a/usr/lib/enigma2/python/Screens/InfoBarGenerics.py
+++ b/usr/lib/enigma2/python/Screens/InfoBarGenerics.py
@@ -1228,21 +1228,18 @@ class InfoBarTimeshift:
 			if harddiskmanager.HDDCount() and not harddiskmanager.HDDEnabledCount():
 				self.session.open(MessageBox, _("Timeshift not possible!") + "\n" \
 					+ _("Please make sure to set up your storage devices with the storage management in menu -> setup -> system -> storage devices."), MessageBox.TYPE_ERROR)
-				return 0
 			elif harddiskmanager.HDDEnabledCount() and defaultStorageDevice() == "<undefined>":
 				self.session.open(MessageBox, _("Timeshift not possible!") + "\n" \
 					+ _("Please make sure to set up your default storage device in menu -> setup -> system -> recording paths."), MessageBox.TYPE_ERROR)
-				return 0
 			elif harddiskmanager.HDDEnabledCount() and defaultStorageDevice() != "<undefined>":
 				part = harddiskmanager.getDefaultStorageDevicebyUUID(defaultStorageDevice())
 				if part is None:
 					self.session.open(MessageBox, _("Timeshift not possible!") + "\n" \
 						+ _("Please verify if your default storage device is attached or set up your default storage device in menu -> setup -> system -> recording paths."), MessageBox.TYPE_ERROR)
-					return 0
 			else:
 				self.session.open(MessageBox, _("Timeshift not possible!"), MessageBox.TYPE_ERROR)
 				print "no ts interface"
-				return 0
+			return 0
 
 		if self.timeshift_enabled:
 			print "hu, timeshift already enabled?"
-- 
1.7.10.4

