From 2287f2587131401c978e9ec884f3d52eee761f6d Mon Sep 17 00:00:00 2001
From: Mladen Horvat <acid-burn@opendreambox.org>
Date: Fri, 21 Dec 2012 10:44:05 +0100
Subject: [PATCH 1/5] enigma2.sh.in: add enigma2 exit codes to run external
 opkgfb tool. fixes #981

---
 usr/bin/enigma2.sh |    9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/usr/bin/enigma2.sh b/usr/bin/enigma2.sh
index 12d5654..bdc5f5a 100755
--- a/usr/bin/enigma2.sh
+++ b/usr/bin/enigma2.sh
@@ -36,6 +36,8 @@ PAGECACHE_FLUSH_INTERVAL=$((512*1024)) LD_PRELOAD=$LIBS @bindir@/enigma2
 # 0 - restart enigma
 # 1 - halt
 # 2 - reboot
+# 6 - start softwareupgrade and restart enigma2
+# 7 - start softwareupgrade and reboot
 #
 # >128 signal
 
@@ -55,6 +57,13 @@ case $ret in
 		/sbin/modprobe fp
 		/sbin/reboot
 		;;
+	6)
+		/usr/bin/opkgfb
+		;;
+	7)
+		/usr/bin/opkgfb
+		/sbin/reboot		
+		;;
 	*)
 		;;
 esac
-- 
1.7.10.4

