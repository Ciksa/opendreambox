From 1bb48d47a09f11ef1bd55be52ee4db34ac7e7b19 Mon Sep 17 00:00:00 2001
From: ghost <andreas.monzner@dream-property.net>
Date: Mon, 22 May 2017 15:40:28 +0200
Subject: [PATCH] NimManager: fixed linked tuner handling (broken since new
 tuner configuration)

---
 usr/lib/enigma2/python/Components/NimManager.py | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/usr/lib/enigma2/python/Components/NimManager.py b/usr/lib/enigma2/python/Components/NimManager.py
index 194af5e..896cce5 100644
--- a/usr/lib/enigma2/python/Components/NimManager.py
+++ b/usr/lib/enigma2/python/Components/NimManager.py
@@ -166,6 +166,13 @@ class SecConfigure:
 				enabled |= iDVBFrontend.feCable
 
 			used_nim_slots.append((slot.slot, slot.description, enabled, slot.frontend_id is None and -1 or slot.frontend_id, slot.input_name or ""))
+
+		# this have to be called before tuners can be linked to other tuners!!!!!!!!
+		eDVBResourceManager.getInstance().setFrontendSlotInformations(used_nim_slots)
+
+		# please do not mix this loop with the following one...
+		# this code must be run before the next loop
+		for slot in nim_slots:
 			x = slot.slot
 			nim = slot.config
 			if slot.isEnabled("DVB-S"):
@@ -188,7 +195,6 @@ class SecConfigure:
 					if not self.satposdepends.has_key(connto):
 						self.satposdepends[connto] = []
 					self.satposdepends[connto].append(x)
-		eDVBResourceManager.getInstance().setFrontendSlotInformations(used_nim_slots)
 
 		for slot in nim_slots:
 			x = slot.slot
-- 
2.1.4

